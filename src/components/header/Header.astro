---
import { menuLinks } from "@lib/utils";
const { pathname } = Astro.url;
---

<header
  class="max-w-7xl mx-auto bg-background-light text-primary-text font-plusjakarta px-4 py-4 sticky z-10 top-0 border-b border-separator/80 backdrop-blur-sm"
>
  <div class="max-w-5xl mx-auto flex justify-between items-center">
    <h1 class="text-xl font-plusjakarta font-bold text-primary-text">
      <a href="/">Milja Travels</a>
    </h1>

    <div
      class="block md:hidden"
      id="menu-button"
      aria-expanded="false"
      aria-controls="menu-mobile"
    >
      <svg
        id="icon-open"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="text-primary"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M4 6h16"></path><path d="M7 12h13"></path><path d="M10 18h10"
        ></path></svg
      >

      <svg
        id="icon-close"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="text-primary hidden"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M18 6l-12 12"></path><path d="M6 6l12 12"></path></svg
      >
    </div>

    <nav
      class="hidden md:flex justify-center items-center gap-4 text-sm text-nav font-medium"
    >
      {
        menuLinks.map((link) => {
          const { name, href } = link;

          let isActive = false;

          if (href === "/") {
            isActive = pathname === "/";
          } else if (href.startsWith("/my-posts/1")) {
            isActive =
              pathname.startsWith("/my-posts") || pathname.startsWith("/post/");
          } else {
            isActive = pathname.includes(href);
          }

          return (
            <a
              href={href}
              class={`rounded-sm p-2 hover:bg-primary hover:text-base ${isActive ? "bg-primary text-base" : ""}`}
            >
              {name}
            </a>
          );
        })
      }

      <div class="flex justify-center items-center">
        <a href="#">
          <svg
            class="text-primary w-6 h-6"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-brand-instagram"
            ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
              d="M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"
            ></path><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path><path
              d="M16.5 7.5v.01"></path></svg
          >
        </a>
        <a href="#">
          <svg
            class="text-primary w-6 h-6"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"
            ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
              d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"
            ></path></svg
          >
        </a>
      </div>
    </nav>
  </div>
</header>
