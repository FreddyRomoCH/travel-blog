---
import Layout from "@layouts/Layout.astro";
import { getLatestPosts, getPageInfo } from "@lib/wp";
import Banner from "@components/banner/Banner.astro";
import LatestPosts from "@components/posts/LatestPosts.astro";

const homePage = await getPageInfo("home-page");
const posts = await getLatestPosts({ perPage: 6 });

const pageExists = homePage && posts.length > 0;
---

{
  pageExists && (
    <Layout title={homePage.title}>
      <Banner
        title={homePage.title}
        content={homePage.content}
        featuredImage={homePage.featuredImage}
        pageName="home-page"
      />
      <LatestPosts posts={posts} />
    </Layout>
  )
}

{!pageExists && Astro.redirect("/404")}
